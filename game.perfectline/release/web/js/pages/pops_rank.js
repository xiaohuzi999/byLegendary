var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])};return function(a,t){function n(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),RankPop=function(e){function a(){var t=e.call(this)||this;t.ui=new ui.pages.RankPageUI,t.bgAlpha=.8,t.isTranslucent=!1,t.ui.btnBack.on(Laya.Event.CLICK,null,function(){t.finish()});var n=t;return t.ui.btnRankGroup.on(Laya.Event.CLICK,null,function(){yxmp.report.event("1000_1008_click"),wx.shareAppMessage(Object.assign(yxmp.asset.getShareMessage("1000_1008_click","1001"),{query:"action=GroupRank",success:function(e){e&&e.shareTickets&&e.shareTickets.length>0&&n.showRankView(e.shareTickets[0])}}))}),t.ui.rankBox.addChild(a.createSharedCanvasView()),t}return __extends(a,e),a.show=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null),e?Tape.PopManager.showPop(a):t&&t.query&&"GroupRank"==t.query.action&&Tape.PopManager.showPop(a,t)},a.prototype.onShow=function(){this.ui.btnRankGroup.visible=!(this.params||{}).shareTicket,Tape.MiniRank.showRank(ui.rank.RankOpenUI.uiView,{shareTicket:(this.params||{}).shareTicket,keyList:["star_score"],sortList:["data.star_score.wxgame.score"]},!1)},a.prototype.showRankView=function(e){this.ui.btnRankGroup.visible=!1,Tape.MiniRank.showRank(ui.rank.RankOpenUI.uiView,{shareTicket:e,keyList:["star_score"],sortList:["data.star_score.wxgame.score"]},!1)},a.createSharedCanvasView=function(){var e=new Laya.Sprite;if(window.hasOwnProperty("sharedCanvas")){var a=window.sharedCanvas;a.width=Laya.stage.width,a.height=Laya.stage.height,a.hasOwnProperty("_addReference")||(a._addReference=function(){});var t=new Laya.Texture(a);t.bitmap.alwaysChange=!0;var n=new Laya.Sprite;n.width=Laya.stage.width,n.height=Laya.stage.height,n.graphics.drawTexture(t,0,0,t.width,t.height),e.addChild(n)}return e},a}(xframe.XMWindow);