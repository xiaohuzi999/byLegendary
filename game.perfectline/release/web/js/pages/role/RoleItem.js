var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}(),RoleItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._vo},set:function(t){this.useBtn.offAll(Laya.Event.CLICK),this._vo=t,this.useBtn.skin="res/common/btn_yellow.png",t&&(this.roleimg.skin="res/ic_role/"+t.img+".png",this.rolename.text=t.name,this.tip.text=t.name,1==User.instace.roleInfo[t.id]?(this.useBtn.label="使用中",this.tip.text="已获得",this.useBtn.skin="res/common/btn_red.png"):0==User.instace.roleInfo[t.id]?(this.useBtn.label="使用",this.tip.text="已获得",this.useBtn.on(Laya.Event.CLICK,this,this.onUse)):(this.useBtn.label="购买",1==t.cost[0]?this.tip.text="消费"+t.cost[1]+"金币获得":this.tip.text="消费"+t.cost[1]+"钻石获得",this.useBtn.on(Laya.Event.CLICK,this,this.onBuy)))},enumerable:!0,configurable:!0}),e.prototype.onBuy=function(){1==this._vo.cost[0]?User.instace.gold<this._vo.cost[1]?XTip.showTip("金币不够了~"):(User.instace.roleInfo[this._vo.id]=0,User.instace.gold-=this._vo.cost[1],XTip.showTip("获得"+this._vo.name),this.onUse()):User.instace.diamond<this._vo.cost[1]?XTip.showTip("钻石不够了~"):(User.instace.roleInfo[this._vo.id]=0,User.instace.diamond-=this._vo.cost[1],XTip.showTip("成功获得并使用"+this._vo.name),this.onUse())},e.prototype.onUse=function(){for(var t in User.instace.roleInfo)t==this._vo.id+""?User.instace.roleInfo[t]=1:User.instace.roleInfo[t]=0;User.instace.save(),User.instace.dispatchEvent()},e.prototype.destroy=function(){this.useBtn.off(Laya.Event.CLICK,this,this.onBuy),this.useBtn.off(Laya.Event.CLICK,this,this.onUse),t.prototype.destroy.call(this)},e}(ui.views.RoleItemRenderUI);