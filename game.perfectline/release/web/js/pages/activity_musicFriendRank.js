var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])};return function(i,s){function e(){this.constructor=i}t(i,s),i.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}}(),MusicFriendRank=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ui=new ui.pages.MusicRankPageUI,i}return __extends(i,t),i.prototype.onCreate=function(){var t=this;this.ui.backBtn.on(Laya.Event.CLICK,null,function(){t.back()});var i=this;this.ui.groupBtn.on(Laya.Event.CLICK,null,function(){yxmp.report.event("2000_2005_click"),wx.shareAppMessage(Object.assign(yxmp.asset.getShareMessage("2000_2005_click","1002"),{query:"action=musicRank&id="+t.musicId+"&author="+t.author+"&musicName="+t.musicName,success:function(t){t&&t.shareTickets&&t.shareTickets.length>0&&i.showRankView(t.shareTickets[0])}}))}),this.params.query?(this.musicName=this.params.query.musicName,this.author=this.params.query.author,this.musicId=this.params.query.id):(this.musicName=this.params.name,this.author=this.params.author,this.musicId=this.params.id),this.ui.musicAuthor.text=this.author,this.ui.musicName.text=this.musicName,this.ui.rankBox.addChild(RankPop.createSharedCanvasView()),this.ui.groupBtn.visible=!(this.params||{}).shareTicket;var s="music_"+this.musicId,e="data."+s+".wxgame.score";Tape.MiniRank.showRank(ui.rank.MusicRankOpenUI.uiView,{shareTicket:(this.params||{}).shareTicket,keyList:[s],sortList:[e],whereList:["score"],mapList:[{from:e,key:"score"}]},!1)},i.prototype.onDestroy=function(){this.showSelfRank()},i.prototype.showRankView=function(t){this.ui.groupBtn.visible=!1;var i="music_"+this.musicId,s="data."+i+".wxgame.score";Tape.MiniRank.showRank(ui.rank.MusicRankOpenUI.uiView,{shareTicket:t,keyList:[i],sortList:[s],whereList:["score"],mapList:[{from:s,key:"score"}]},!1)},i.prototype.showSelfRank=function(){if(!this.params.query){var t="music_"+this.musicId,i="data."+t+".wxgame.score";Tape.MiniRank.showRank(ui.rank.ResultOpenUI.uiView,{shareTicket:"",keyList:[t],sortList:[i],whereList:["score"],mapList:[{from:i,key:"score"}]},!1)}},i}(xframe.XMWindow);