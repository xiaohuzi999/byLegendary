var User=function(){function e(){this.avatar="res/ic_role/ppx.png",this.id="",this.nickname="",this.gold=0,this.power=10,this.diamond=0,this.loginDay=-1,this.curId=1,this.starInfo={1:0},this.roleInfo={1:1},this.sign={end:0,info:[]}}return e.prototype.initdData=function(){this.updateVal();var t=new Date;t.getDay()!=this.loginDay&&(this.loginDay=t.getDay(),this.power=e.MaxPower);var n=Laya.Browser.now();if(n-this.sign.end>0){var i=new Date,a=6-i.getDay(),r=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1).getTime()-i.getTime();r+=864e5*a,this.sign.end=n+r,trace("end::::::::::::::",this.sign.end),this.sign.info.length=0}},e.prototype.updateVal=function(){var e=XDB.getData(XDB.USER);if(e){trace("User:::",e);for(var t in e)this[t]=e[t]}else trace("日购了")},Object.defineProperty(e.prototype,"curRole",{get:function(){for(var e in this.roleInfo)if(1==this.roleInfo[e])return parseInt(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canSign",{get:function(){var e=(new Date).getDay();return-1==this.sign.info.indexOf(e)},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(){XEvent.instance.event(e.UPDATE)},e.prototype.save=function(){XDB.save(XDB.USER,this)},Object.defineProperty(e,"instace",{get:function(){return this._instace||(this._instace=new e),this._instace},enumerable:!0,configurable:!0}),e.UPDATE="update",e.MaxPower=10,e}();