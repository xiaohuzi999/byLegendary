var xframe;!function(e){var t=function(){function t(){}return t.init=function(e,t,i,o){var n=this,r=[];e&&r.push(e),t&&r.push(t),i&&r.push(i),r.length?Laya.loader.load(r,Handler.create(null,function(){n._resCfg=Laya.loader.getRes(e)||{},n._moduleCfg=n._resCfg.modules,i&&(n._unpackCfg=n.getRes(i)),t&&(View.uiMap=Laya.loader.getRes(t)),o.run()})):o.run()},t.load=function(e,t,i,o,n,r){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=1),void 0===r&&(r=!0);var a=this.getUrlList(e,!0);null==a||a.length<1?t.run():Laya.loader.load(a,Handler.create(null,this.loadItemComplete,[t]),Handler.create(null,this.onLoadProgress,[e,i],!1),o,n,r,e)},t.loadItemComplete=function(e){e&&e.run()},t.onLoadProgress=function(t,i,o){i&&i.runWith(o),e.trace("RES::onLoadProgress->"+t+"  progress:  "+o)},t.getRes=function(e){return-1==e.indexOf(this.URL_PRE)&&(e=this.URL_PRE+e),Loader.getRes(e)},t.unloadGroup=function(e){var t=this.getUrlList(e);for(var i in t)this.unload(t[i].url)},t.unload=function(e,t){void 0===t&&(t=!1),t?-1!=this._unpackCfg.indexOf(e)&&this.delQuote(e):this.delQuote(e)},t.addUnpackQuote=function(e){for(var t in e._childs){var i=e._childs[t]&&e._childs[t].skin;i&&-1!=this._unpackCfg.indexOf(i)&&this.addQuote(i)}},t.delUnpackQuote=function(e){for(var t in e._childs){var i=e._childs[t]&&e._childs[t].skin;i&&-1!=this._unpackCfg.indexOf(i)&&this.delQuote(i)}},t.addQuote=function(e){this._quoteDic[e]?this._quoteDic[e]=this._quoteDic[e]+1:this._quoteDic[e]=1},t.delQuote=function(e){this._quoteDic[e]&&(this._quoteDic[e]-=1,this._quoteDic[e]<=0&&(Loader.clearRes(e),delete this._quoteDic[e]))},t.getUrlList=function(e,t){void 0===t&&(t=!1);var i=this._moduleCfg[e];if(i)for(var o in i)i[o]instanceof String&&(i[o]={url:this.URL_PRE+i[o],type:this.getTypeFromUrl(i[o]),size:1,priority:1}),t&&this.addQuote(i[o].url);return i},t.getTypeFromUrl=function(t){var i=(t+"").split("."),o=i[i.length-1];return o?((o=Loader.typeMap[o.toLowerCase()])==Loader.JSON&&t.indexOf(this.URL_ATLAS)>-1&&(o=Loader.ATLAS),o):(e.trace("RES::Unkown file suffix",t),Loader.TEXT)},t._unpackCfg=[],t._quoteDic={},t.URL_PRE="res/",t.URL_ATLAS="atlas/",t}();e.RES=t}(xframe||(xframe={}));