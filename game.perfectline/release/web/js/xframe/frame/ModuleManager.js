var xframe;!function(e){var n=function(){function e(){}return e.init=function(){Laya.timer.loop(e.RECOVER_INTERVAL,e,e.recover),Laya.stage.on(Laya.Event.RESIZE,e,e.onResize),XEvent.instance.on(XEvent.CLOSE,null,this.onModuleClose)},e.showModule=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r;return n&&(r=e.getModule(n)).show.apply(r,o),r},e.getModule=function(n){var o;for(var i in e.viewsInfo)if((o=e.viewsInfo[i])&&o.view instanceof n)return o.view;var r=new n;return e.viewsInfo.push({view:r}),r},e.hasModule=function(n){var o;for(var i in e.viewsInfo)if((o=e.viewsInfo[i])&&o.view instanceof n)return!0;return!1},e.addModule=function(n,o){return this.hasModule(o)||e.viewsInfo.push({view:n}),n},e.disposeModule=function(n){var o;for(var i in e.viewsInfo)if((o=e.viewsInfo[i])&&o.view==n){n.destroy(!0),e.viewsInfo.splice(parseInt(i),1);break}},e.recover=function(){for(var n,o,i=Laya.Browser.now(),r=0;r<e.viewsInfo.length;r++)if(n=e.viewsInfo[r],(o=n?n.view:null)&&!o.displayedInStage&&o.autoDispose&&i-n.time>e.RECOVER_TIME){o.destroy(!0),e.viewsInfo.splice(r,1);break}if(Laya.ResourceManager.systemResourceManager.memorySize>e.MAX_MEMO_SIZE)for(r=0;r<e.viewsInfo.length;r++)if(n=e.viewsInfo[r],(o=n?n.view:null)&&!o.displayedInStage&&o.autoDispose){o.destroy(!0),e.viewsInfo.splice(r,1);break}},e.onResize=function(){var n,o;for(var i in e.viewsInfo)(o=(n=e.viewsInfo[i])?n.view:null)&&o.displayedInStage&&o.onStageResize()},e.onModuleClose=function(n){var o;for(var i in e.viewsInfo)if((o=e.viewsInfo[i])&&o.view==n){o.time=Laya.Browser.now(),e.viewsInfo.splice(parseInt(i),1),e.viewsInfo.push(o);break}},e.viewsInfo=[],e.RECOVER_INTERVAL=1e4,e.RECOVER_TIME=3e4,e.MAX_MEMO_SIZE=268435456,e}();e.ModuleManager=n}(xframe||(xframe={}));